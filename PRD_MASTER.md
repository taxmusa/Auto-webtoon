# 세무 웹툰 자동화 시스템 PRD (Product Requirements Document)

> **프로젝트명**: Tax Webtoon Auto-Generator  
> **버전**: 1.1.0  
> **최종 수정일**: 2026-02-06  
> **작성자**: 지광 + Claude

---

## 1. 프로젝트 개요

### 1.1 프로젝트 배경 및 목적

세무/회계/법률 등 전문 분야의 정보를 일반인이 이해하기 쉬운 **웹툰/카드뉴스 형태**로 자동 생성하여 인스타그램에 발행하는 시스템.

**핵심 가치**:
- 전문 지식의 대중화 (딱딱한 세법 → 친근한 웹툰)
- 콘텐츠 제작 시간 단축 (수작업 대비 90% 이상 절감)
- 일관된 품질의 콘텐츠 대량 생산

### 1.2 타겟 사용자

**Phase 1**: 개발자 본인 및 지인 (세무사, 회계사, 변호사 등 전문직)
**Phase 2**: 프로그램 판매 (일반 판매, 구독 모델 X)

### 1.3 수익 모델

- **일회성 프로그램 판매** (구독 모델 아님)
- **AI 비용은 사용자 부담**: 구매자가 직접 API 키 입력 (Gemini, OpenAI, Cloudinary, Instagram)
- 이유: 지속적인 운영 비용 없이 순수 프로그램 판매로 수익화

---

## 2. 시스템 아키텍처

### 2.1 아키텍처 결정 배경

**초기 검토안**: n8n 워크플로우 활용
**문제점**: 
- 시리즈 분할 로직이 복잡 (30+ 노드 예상)
- Pillow 한글 텍스트 오버레이는 Python 필수
- 노드 수 증가 시 유지보수 어려움
- 로컬 웹앱 형태와 맞지 않음

**최종 결정**: **Python FastAPI 단독 (n8n 미사용)**

```
┌─────────────────────────────────────────────────────────────┐
│                    로컬 웹앱 (.exe)                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [브라우저 UI]  ←──HTTP──→  [Python FastAPI Server]        │
│   (localhost:8000)           │                              │
│                              ├─ 스토리 생성 (Gemini)        │
│                              ├─ 이미지 생성 (DALL-E)        │
│                              ├─ 텍스트 오버레이 (Pillow)    │
│                              ├─ 이미지 호스팅 (Cloudinary)   │
│                              └─ Instagram 발행 (Graph API) │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**n8n을 제외한 이유**:
- 로컬 웹앱에서 n8n 별도 설치/실행 필요 → 사용자 부담
- Python으로 모든 기능 구현 가능
- 단일 프로세스로 관리 간편
- 설치 파일 크기 최소화

### 2.2 배포 형태

**형태**: Windows 로컬 웹앱 (.exe 설치 파일)

**사용자 흐름**:
1. .exe 설치 파일 실행 (원클릭 설치)
2. 바탕화면 아이콘 생성
3. 아이콘 클릭 → Chrome 자동 실행 → localhost:8000 접속
4. 최초 실행 시 API 키 설정 (1회)
5. 이후 바로 사용 가능

**왜 웹앱 형태인가?**
- Electron 대비 개발 난이도 낮음
- UI 개발이 표준 웹 기술로 가능
- 씬 편집, 이미지 프리뷰 등 UI가 웹에서 더 자연스러움
- 추후 SaaS 전환 시 코드 재사용 용이
- 설치 파일 크기 작음 (~50MB vs Electron 100-200MB)

**업데이트 방식**: 
- 초기: 수동 재설치 또는 인앱 알림
- 추후: 사용자 많아지면 자동 업데이트 기능 추가

---

## 3. 핵심 워크플로우

### 3.1 전체 흐름 개요

```
[키워드 입력] → [분야 자동 감지] → [정보 수집] → [스토리 생성] 
      ↓
[씬 검토 UI] ← 1차 체크포인트 (씬별 편집/재생성 가능)
      ↓
[이미지 생성] 
      ↓
[이미지 검토 UI] ← 2차 체크포인트 (불만족 씬 재생성)
      ↓
[텍스트 오버레이] → [캡션 자동 생성]
      ↓
[캡션 검토 UI] ← 3차 체크포인트 (훅/본문/팁/해시태그 수정)
      ↓
[최종 확인] → [Instagram 발행]
      ↓
[동영상 변환] ← 선택적 (Sora/Grok 등)
```

### 3.2 단계 간 이동 (이전/다음)

**모든 단계에서 이전 단계로 돌아가기 가능**:
- 이미지 생성 후에도 씬 검토로 돌아가서 수정 가능
- 캡션 작성 중에도 이미지 재생성 가능
- 변경 시 해당 단계 이후 결과물은 재생성 필요 알림

```
[씬 검토] ←→ [이미지 생성] ←→ [이미지 검토] ←→ [캡션 검토] ←→ [최종 확인]
   ↑                                                              ↓
   └──────────────── 어느 단계에서든 돌아가기 가능 ─────────────────┘
```

### 3.3 두 가지 모드

#### 자동 모드 (키워드 기반)
1. 사용자가 키워드 입력 (예: "종합소득세 신고")
2. AI가 분야 자동 판단 (세무/법률/노무/회계/부동산정책/일반)
3. 분야별 정보 수집 방식 결정:
   - **전문 분야**: 최신 법령/규정 검증 필수 (웹 검색 + 법령 DB)
   - **일반 분야**: 일반 웹 검색
4. 사용자가 분야 판단 결과 확인 및 수정 가능
5. AI가 씬 개수 및 시리즈 분할 추천
6. 사용자 조정 후 스토리 생성 진행

```
[키워드: 종합소득세 신고]
        ↓
[AI 판단: 세무 분야 / 2025년 기준 / 법령 검증 필요]
        ↓
[사용자: 확인 or 변경]
```

#### 수동 모드 (직접 입력)
1. 키워드 없이 시작
2. 사용자가 직접 자료 업로드 또는 내용 입력
3. 씬 개수 직접 설정
4. 각 씬 내용 직접 작성
5. 이후 과정은 동일 (이미지 생성 → 검토 → 발행)

**두 모드 공통**: 씬 개수 조절, 내용 수정 가능

### 3.3 씬 검토 UI (첫 번째 체크포인트)

**목적**: 이미지 생성 전에 스토리/대사 내용 확인 및 수정

```
┌─────────────────────────────────────────────────────────────┐
│  씬 검토                                              [전체 재생성]  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  씬 1: 도입                                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 장면: 사무실에서 고민하는 직장인                          │   │
│  │ 민지: "세금 신고 어떻게 하지..."                         │   │
│  │ ⚠️ 대사가 너무 깁니다 (25자 → 20자 권장)                │   │
│  └─────────────────────────────────────────────────────┘   │
│  [편집] [재생성] [칠판 스타일로 변경] [OK ✓]                  │
│                                                             │
│  씬 2: 전문가 등장                                           │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 장면: 세무사가 등장하며 설명 시작                         │   │
│  │ 세무사: "제가 알려드릴게요!"                             │   │
│  └─────────────────────────────────────────────────────┘   │
│  [편집] [재생성] [OK ✓]                                      │
│                                                             │
│  ... (씬 3~N)                                               │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                    [모든 씬 확정 → 이미지 생성 시작]            │
└─────────────────────────────────────────────────────────────┘
```

**핵심 기능**:
- 개별 씬 편집/재생성
- 씬 순서 변경 (드래그)
- 씬 추가/삭제
- 콘텐츠 밀도 경고 (글자수 초과 시 자동 감지)
- 전체 재생성 옵션

### 3.4 이미지 검토 UI (두 번째 체크포인트)

**목적**: 생성된 이미지 품질 확인 및 불만족 이미지 재생성

```
┌─────────────────────────────────────────────────────────────┐
│  이미지 검토                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                       │
│  │ 씬1  │ │ 씬2  │ │ 씬3  │ │ 씬4  │  ...                  │
│  │ [OK] │ │ [재] │ │ [OK] │ │ [OK] │                       │
│  └──────┘ └──────┘ └──────┘ └──────┘                       │
│                                                             │
│  [선택된 씬 재생성] [모두 OK → 텍스트 오버레이 진행]            │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. 콘텐츠 설정

### 4.1 이미지 스타일 (3가지)

| 스타일 | 설명 | 캐릭터 | 용도 |
|--------|------|--------|------|
| **웹툰** | 캐릭터 + 말풍선 + 배경 | O (2인 대화) | 스토리텔링, 친근한 분위기 |
| **카드뉴스** | 텍스트 중심 + 아이콘/도표 | △ (마스코트 옵션) | 정보 전달, 공식적 |
| **심플 캐러셀** | 깔끔한 배경 + 핵심 문구만 | △ (마스코트 옵션) | 빠른 정보 전달 |

**세부 스타일 옵션** (웹툰 선택 시):
- 일반
- 지브리 스타일
- 로맨스
- 비즈니스
- 기타 커스텀

### 4.2 캐릭터 시스템

#### 기본 프리셋
- **질문자**: 일반인 / 사업자 / 직장인 (선택 가능)
- **전문가**: 세무사 / 변호사 / 노무사 / 회계사 (분야에 따라 자동 또는 선택)

#### 캐릭터 프리셋 저장
- 자주 사용하는 캐릭터 조합 저장
- 불러오기 기능
- 커스텀 캐릭터 추가 가능

#### 캐릭터 표정 지정
- 기본: AI가 대사 분석하여 자동 지정
- 수동: 씬별로 표정 선택 가능 (기쁨/걱정/설명/놀람/진지 등)

#### 마스코트 (카드뉴스/심플용)
- 코너에 작은 캐릭터 배치
- 브랜딩 + 친근함 효과
- ON/OFF 설정 가능

### 4.3 콘텐츠 밀도 규칙

**씬 생성 시 제한**:
| 항목 | 제한 | 초과 시 |
|------|------|---------|
| 캐릭터 대사 | 최대 20자 | 경고 + 자동 분할 제안 |
| 말풍선 개수 | 최대 2개/씬 | 경고 |
| 나레이션 | 최대 30자 | 경고 |

**씬 검토 단계 표시 예시**:
```
⚠️ 씬 3: 대사가 너무 깁니다 (35자 → 20자 권장)
   [자동 분할] [직접 수정]
```

**이유**: 모바일 가독성 확보, 이미지 내 텍스트 과밀 방지

### 4.4 시리즈 분할

**인스타그램 제한**: 캐러셀 최대 10장

**분할 로직**:
- 15씬 → 2개 시리즈 (8+7 또는 7+8)
- 20씬 → 2개 시리즈 (10+10)
- 25씬 → 3개 시리즈

**AI 추천 → 사용자 조정 가능**:
```
[AI 추천]
"총 15개 씬이 적당해 보여요"
"시리즈 2개로 나누는 걸 추천해요 (8+7)"
        ↓
[사용자 조정]
- 씬 개수 변경 (예: 14개로 줄이기)
- 시리즈 분할 방식 변경 (예: 7+7)
```

**"다음편에 계속" 자동 생성**:
- 체크박스로 ON/OFF
- 시리즈 마지막 장에 자동 추가

### 4.5 썸네일 전략

**결정**: 별도 썸네일 생성 (첫 장과 분리)

**이유**:
- 인스타 피드에서 클릭 유도 중요
- 전용 커버 이미지가 더 효과적
- 첫 캐러셀 슬라이드는 스토리 시작에 집중

**썸네일 구성 예시**:
```
┌──────────────────┐
│   🔥 종합소득세   │
│   신고 꿀팁!      │
│   3분 정리       │
│                  │
│   [마스코트]      │
└──────────────────┘
```

---

## 5. 상세 설정 (디폴트값 제공, 필요시 수정 가능)

### 5.1 텍스트 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 폰트 선택 | 나눔고딕 | 배민체, 맑은고딕, 카페24 등 |
| 대사 폰트 크기 | 24px | 18~36px |
| 나레이션 폰트 크기 | 20px | 16~30px |
| 대사 배치 | 말풍선 | 하단 자막 스타일 |

### 5.2 캐릭터 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 질문자 유형 | 일반인 | 사업자, 직장인 |
| 전문가 유형 | 자동 (분야별) | 세무사, 변호사, 노무사 등 |
| 캐릭터 프리셋 | - | 저장/불러오기 가능 |
| 캐릭터 표정 | 자동 (대사 분석) | 씬별 수동 지정 가능 |

### 5.3 레이아웃 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 이미지 비율 | 1080x1350px (4:5) | 1:1, 4:5, 9:16 등 |
| 여백 | 20px | 0~50px |
| 페이지 번호 | 우하단 | 위치 변경/숨김 |
| 시리즈 배지 | 좌상단 | 위치 변경 |

### 5.4 스타일 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 그림 스타일 | 웹툰 | 카드뉴스, 심플 |
| 세부 스타일 | 일반 | 지브리, 로맨스, 비즈니스 등 |
| 마스코트 사용 | ON (카드뉴스/심플) | ON/OFF |

### 5.5 출력 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 저장 포맷 | 개별 파일 | 2x2 그리드, 가로연속, 세로연속 |
| 이미지 비율 | 1080x1350px | 인스타 정책 변경 대비 조절 가능 |
| 파일 형식 | PNG | JPG, WebP |
| 압축 품질 | 고화질 (90%) | 중간(70%), 저용량(50%) |
| 워터마크 | OFF | 로고/텍스트 삽입 가능 |

### 5.6 캡션 자동 생성

**캡션 구조** (자동 생성 → 검토/수정 가능):

```
┌─────────────────────────────────────────────────────┐
│ 🔥 훅 문장 (첫 줄)                                   │
│ "종합소득세 신고, 이것만 알면 끝!"                    │
├─────────────────────────────────────────────────────┤
│ 📝 본문 캡션                                        │
│ 매년 5월이면 찾아오는 종소세 신고 시즌!              │
│ 어떻게 해야 할지 막막하셨죠?                        │
│                                                     │
│ 오늘 웹툰에서 핵심만 쏙쏙 알려드릴게요 👀           │
│ 저장해두고 신고할 때 꺼내보세요!                    │
├─────────────────────────────────────────────────────┤
│ 💡 세무사 Tip                                       │
│ "신고 기한을 놓치면 가산세가 붙어요.                │
│  5월 31일까지 꼭 신고하세요!"                       │
├─────────────────────────────────────────────────────┤
│ #️⃣ 해시태그 (15~20개)                              │
│ #종합소득세 #세금신고 #절세팁 #세무사 #5월세금      │
│ #소득세 #세금정보 #직장인세금 #프리랜서세금 ...     │
└─────────────────────────────────────────────────────┘
```

| 항목 | 자동 생성 규칙 | 수정 가능 |
|------|---------------|-----------|
| 훅 문장 | 주제 기반 클릭 유도 문구 | ✓ |
| 본문 캡션 | 스토리 요약 + CTA | ✓ |
| 세무사 Tip | 핵심 정보 1줄 요약 | ✓ |
| 해시태그 | 주제+분야 기반 15~20개 | ✓ (추가/삭제) |

### 5.7 발행 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 캡션 | 자동 생성 | 검토 단계에서 수정 가능 |
| 해시태그 | 자동 생성 (15~20개) | 수동 편집 가능 |
| 예약 발행 | 즉시 | 시간 지정 / 최적 시간 추천 |

### 5.8 AI 설정

| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 텍스트 생성 모델 | Gemini 2.5 Flash | Gemini Pro, Claude 등 |
| 이미지 생성 모델 | DALL-E 3 | Imagen, Midjourney API 등 |

**모델 선택 가이드**:
- **Gemini 2.5 Flash**: 빠르고 저렴, 간단한 스토리에 적합
- **Gemini Pro**: 복잡한 전문 내용에 적합, 비용 더 높음

---

## 6. 확장 기능 (선택적)

### 6.1 이미지 → 동영상 변환

**목적**: 완성된 웹툰을 릴스/쇼츠용 동영상으로 변환

**지원 예정 서비스**:
- Sora (OpenAI)
- Grok (xAI)
- Runway
- 기타 이미지→영상 API

**워크플로우**:
```
[완성된 웹툰 이미지] → [동영상 변환 옵션] → [영상 생성] → [다운로드/발행]
```

**설정 옵션**:
| 항목 | 디폴트값 | 설정 범위 |
|------|----------|-----------|
| 변환 서비스 | 수동 선택 | Sora, Grok, Runway 등 |
| 영상 길이 | 15초 | 5~60초 |
| 전환 효과 | 페이드 | 슬라이드, 줌, 없음 |
| 배경음악 | 없음 | 라이브러리 선택 또는 업로드 |

**참고**: Phase 2 이후 구현 예정 (API 비용 및 안정성 확인 후)

---

## 7. 기술 스택

### 7.1 프론트엔드
- HTML/CSS/JavaScript (Vanilla 또는 경량 프레임워크)
- 반응형 웹 UI

### 7.2 백엔드
- Python FastAPI
- 비동기 처리 (asyncio)

### 7.3 AI/ML
- **텍스트 생성**: 
  - Gemini 2.5 Flash (기본, 저렴하고 빠름)
  - Gemini Pro (복잡한 내용용, 선택)
- **이미지 생성**: 
  - OpenAI DALL-E 3 (기본)
  - Google Imagen (옵션)
- **텍스트 오버레이**: Python Pillow
- **동영상 변환** (Phase 2): Sora, Grok, Runway 등

### 7.4 외부 서비스
- **이미지 호스팅**: Cloudinary API
- **소셜 발행**: Instagram Graph API

### 7.5 배포
- PyInstaller (Python → exe 변환)
- Inno Setup (Windows 설치 파일 생성)

---

## 8. 제약사항 및 한계

### 8.1 기술적 제약

| 제약 | 내용 | 대응 방안 |
|------|------|-----------|
| AI 이미지 한글 텍스트 | DALL-E/Imagen 모두 한글 렌더링 불가 | Pillow로 후처리 오버레이 |
| 캐릭터 일관성 | AI 이미지 생성 시 캐릭터 일관성 유지 어려움 | 프롬프트 고정 + 씬별 재생성 옵션 |
| 웹툰 스타일 제한 | Imagen 3는 만화/웹툰 스타일 콘텐츠 정책 제한 | DALL-E 3 우선 사용 |

### 8.2 비용 구조 (사용자 부담)

| 서비스 | 예상 비용 | 비고 |
|--------|-----------|------|
| OpenAI API | ~$0.04/이미지 | DALL-E 3 기준 |
| Gemini API | 무료 티어 | 일일 제한 있음 |
| Cloudinary | 무료 (25GB) | 충분한 무료 티어, 간편한 설정 |
| Instagram API | 무료 | Business 계정 필요 |

---

## 9. 향후 확장 계획

### Phase 1 (현재)
- 기본 기능 완성
- 지인 대상 테스트

### Phase 2
- 피드백 반영 개선
- 프로그램 판매 시작

### Phase 3 (선택적)
- SaaS 전환 검토
- 다국어 지원
- 다른 플랫폼 지원 (유튜브 쇼츠, 틱톡 등)
- **이미지→동영상 변환 기능** (Sora, Grok 등)

---

## 10. 참고 자료

### 10.1 영감 받은 서비스/콘텐츠

- **캡틴AI 블로그**: Google AI Studio Build 기능을 활용한 4컷 만화 프로그램 제작
  - 4단계 워크플로우: 주제 선택 → 대본 생성 → 인물 생성 → 만화 생성
  - 대본 세부 수정 가능 (씬별 장면 설명 + 대사 편집)
  - 캐릭터 프로필 카드로 개별 이미지 생성
  - 다양한 저장 옵션 (2x2, 가로연속, 세로연속, 개별파일)
  - 대사 배치 옵션 (말풍선 vs 하단 자막)
  - **이미지→동영상 변환** (Sora/Grok)
  - Gemini 2.5 Flash 모델 사용 (Pro보다 저렴)

### 10.2 반영된 기능 (캡틴AI 참고)

| 기능 | 적용 여부 | 비고 |
|------|----------|------|
| 그림 스타일 선택 | ✓ | 세부 스타일 추가 |
| 저장 포맷 옵션 | ✓ | 2x2, 가로연속, 세로연속, 개별파일 |
| 대사 배치 선택 | ✓ | 말풍선 vs 하단 자막 |
| 캐릭터 프로필 카드 | ✓ | 프리셋 저장 기능 추가 |
| 단계별 이전/다음 이동 | ✓ | 모든 단계에서 이전으로 돌아가기 가능 |
| 씬별 대본 수정 | ✓ | 씬 검토 UI에서 개별 편집 |
| 이미지→동영상 변환 | △ | Phase 3 구현 예정 |
| Gemini Flash 모델 | ✓ | 기본 텍스트 생성 모델로 채택 |

---

## 11. 문서 구조

```
/project-docs/
├── PRD_MASTER.md          ← 현재 문서 (전체 기획 + 의사결정 히스토리)
│
├── /skills/
│   ├── WORKFLOW.md        ← 워크플로우 상세 (씬 생성, 분할 로직)
│   ├── UI_SPEC.md         ← UI/UX 상세 스펙 (화면별 설계)
│   ├── IMAGE_GENERATION.md ← 이미지 생성 로직 (프롬프트, 스타일)
│   ├── TEXT_OVERLAY.md    ← Pillow 텍스트 처리 (한글 폰트, 말풍선)
│   └── INSTAGRAM_API.md   ← 인스타 발행 로직 (Graph API, 캐러셀)
│
└── DECISION_LOG.md        ← 의사결정 히스토리 (왜 이렇게 했는지)
```

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-02-06 | 1.0.0 | 초기 PRD 작성 |
| 2026-02-06 | 1.1.0 | 캡션 자동생성(훅/본문/팁/해시태그), 캡션 검토 UI, 단계 간 이동, 동영상 변환 옵션, Gemini Flash 모델 추가 |
