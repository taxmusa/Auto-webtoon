# 세무 웹툰 자동화 시스템 PRD (Product Requirements Document)

> **프로젝트명**: Tax Webtoon Auto-Generator  
> **버전**: 1.3.0  
> **최종 수정일**: 2026-02-09  
> **작성자**: 지광 + Claude

---

## 1. 프로젝트 개요

### 1.1 프로젝트 배경 및 목적

세무/회계/법률 등 전문 분야의 정보를 일반인이 이해하기 쉬운 **웹툰/카드뉴스 형태**로 자동 생성하여 인스타그램에 발행하는 시스템.

**핵심 가치**:
- 전문 지식의 대중화 (딱딱한 세법 → 친근한 웹툰)
- 콘텐츠 제작 시간 단축 (수작업 대비 90% 이상 절감)
- 일관된 품질의 콘텐츠 대량 생산

### 1.2 타겟 사용자

**Phase 1**: 개발자 본인 및 지인 (세무사, 회계사, 변호사 등 전문직)  
**Phase 2**: 프로그램 판매 (일반 판매, 구독 모델 X)

### 1.3 수익 모델

- **일회성 프로그램 판매** (구독 모델 아님)
- **AI 비용은 사용자 부담**: 구매자가 직접 API 키 입력 (Google AI Studio, OpenAI, Cloudinary, Instagram)
- 이유: 지속적인 운영 비용 없이 순수 프로그램 판매로 수익화

---

## 2. 시스템 아키텍처

### 2.1 아키텍처

**최종 결정**: Python FastAPI 단독 (n8n 미사용)

```
┌─────────────────────────────────────────────────────────────┐
│                    로컬 웹앱 (.exe)                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [브라우저 UI]  ←──HTTP──→  [Python FastAPI Server]        │
│   (localhost:8000)           │                              │
│                              ├─ 스토리 생성 (Gemini Flash)  │
│                              ├─ 이미지 생성 (GPT Image /   │
│                              │              Nano Banana)    │
│                              ├─ 텍스트 오버레이 (Pillow)    │
│                              ├─ 이미지 호스팅 (Cloudinary)  │
│                              └─ Instagram 발행 (Graph API)  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 배포 형태

**형태**: Windows 로컬 웹앱 (.exe 설치 파일)

1. .exe 설치 파일 실행 (원클릭 설치)
2. 바탕화면 아이콘 클릭 → Chrome 자동 실행 → localhost:8000
3. 최초 실행 시 API 키 설정 (1회)

---

## 3. 핵심 워크플로우

```
[키워드 입력] → [분야 자동 감지] → [정보 수집] → [스토리 생성]
      ↓
[씬 검토 UI] ← 1차 체크포인트 (씬별 편집/재생성)
      ↓
[이미지 생성]
      ↓
[이미지 편집] ← 2차 체크포인트 (전체 톤 조절 + 씬별 확정) ★
      ↓
[텍스트 오버레이] → [캡션 자동 생성]
      ↓
[캡션 검토 UI] ← 3차 체크포인트 (훅/본문/팁/해시태그)
      ↓
[최종 확인] → [Instagram 발행]
```

- 모든 단계에서 이전 단계로 돌아가기 가능
- 자동 모드 / 수동 모드 선택 가능

> 상세: WORKFLOW.md 참조

---

## 4. 콘텐츠 설정

### 4.1 이미지 스타일 (3가지)

| 스타일 | 설명 | 캐릭터 | 용도 |
|--------|------|--------|------|
| **웹툰** | 캐릭터 + 말풍선 + 배경 | O (2인 대화) | 스토리텔링 |
| **카드뉴스** | 텍스트 중심 + 아이콘/도표 | △ (마스코트 옵션) | 정보 전달 |
| **심플 캐러셀** | 깔끔한 배경 + 핵심 문구 | △ (마스코트 옵션) | 빠른 전달 |

세부 스타일: 일반 / 지브리 / 로맨스 / 비즈니스 / 커스텀

### 4.2 캐릭터 일관성 시스템 ⭐

**DNA Template 기반 캐릭터 관리** — 80~90% 일관성 달성 목표

핵심 기법 조합:
1. **DNA Template (프롬프트 고정)** — identity_block은 FROZEN string
2. **레퍼런스 이미지 첨부** — GPT Image: 최대 4장 / Nano Banana: 최대 10장
3. **캐릭터 시트 생성** — 2x3 그리드 (정면/3/4/프로필/표정3종)
4. **LOCKED 속성** — 색상 hex 코드, 비율 숫자 고정

캐릭터 데이터: 물리적 특징 + 의상 + 스타일 + 레퍼런스 이미지 + 프롬프트 조각

캐릭터 생성 방법:
- A) 새로 만들기: 기본 정보 → AI DNA 생성 → 캐릭터 시트 → 저장
- B) 기존 이미지에서: 업로드 → Vision AI 추출 → DNA 생성 → 저장

> 상세: CHARACTER_CONSISTENCY.md 참조

### 4.3 콘텐츠 밀도 규칙

| 항목 | 제한 | 초과 시 |
|------|------|---------|
| 캐릭터 대사 | 최대 20자 | 경고 + 자동 분할 제안 |
| 말풍선 개수 | 최대 2개/씬 | 경고 |
| 나레이션 | 최대 30자 | 경고 |

### 4.4 시리즈 분할

인스타 캐러셀 최대 10장. AI 추천 → 사용자 조정 가능. "다음편에 계속" 자동 생성 (ON/OFF).

### 4.5 썸네일

별도 썸네일 생성 (첫 장과 분리). 전용 커버 이미지.

---

## 5. AI 모델 설정 ⭐

### 5.1 텍스트 생성

| 모델 | 용도 | API 키 |
|------|------|--------|
| **Gemini 2.5 Flash** (기본) | 스토리/대사/캡션 | Google AI Studio |
| Gemini Pro (옵션) | 복잡한 전문 내용 | 동일 키 |

### 5.2 이미지 생성 (5개 모델) ⭐

**원칙**: 사용자가 이미 보유한 API 키만 사용 (OpenAI + Google)

**OpenAI API 키 →**

| 모델 | 가격/장 | 레퍼런스 이미지 | 추천 |
|------|---------|---------------|------|
| GPT Image 1 Mini | $0.005~0.052 | ✅ | 💰 가성비 최강 |
| GPT Image 1 | $0.02~0.19 | ✅ (최대 4장) | ⭐ 균형 추천 |
| GPT Image 1.5 | $0.04~0.08 | ✅ 멀티 이미지 | 👑 최고 품질 |

**Google AI Studio 키 →**

| 모델 | 가격/장 | 레퍼런스 이미지 | 추천 |
|------|---------|---------------|------|
| Nano Banana | ~$0.02 | ✅ (최대 10장) | 💰 최저가 |
| Nano Banana Pro | $0.134~0.24 | ✅ (최대 8장) | 4K/멀티턴 |

**비용 시뮬레이션** (1편 10장, 재생성 포함 ~15회):

| 모델 | 1편 | 월 8편 |
|------|-----|--------|
| GPT Image 1 Mini (Low) | ₩90 | ₩720 |
| Nano Banana | ₩360 | ₩2,880 |
| GPT Image 1.5 | ₩720 | ₩5,760 |
| Nano Banana Pro (2K) | ₩2,400 | ₩19,200 |

> 상세 비교: AI_IMAGE_MODEL_COMPARISON.md 참조

---

## 6. 상세 설정 (디폴트값 제공)

| 카테고리 | 항목 | 디폴트값 |
|----------|------|----------|
| 텍스트 | 폰트 | 나눔고딕 |
| 텍스트 | 대사 크기 | 24px |
| 텍스트 | 대사 배치 | 말풍선 |
| 레이아웃 | 이미지 비율 | 1080x1350px (4:5) |
| 레이아웃 | 여백 | 20px |
| 스타일 | 그림 스타일 | 웹툰 |
| 스타일 | 마스코트 | ON |
| 출력 | 저장 포맷 | 개별 파일 |
| 출력 | 파일 형식 | PNG |
| AI | 텍스트 모델 | Gemini 2.5 Flash |
| AI | 이미지 모델 | GPT Image 1 Mini |
| AI | 이미지 품질 | Medium |
| 발행 | 해시태그 | 자동 15~20개 |
| 발행 | 예약 | 즉시 |

---

## 7. 기술 스택

| 영역 | 기술 |
|------|------|
| 프론트엔드 | HTML/CSS/JS |
| 백엔드 | Python FastAPI, asyncio |
| 텍스트 AI | Gemini 2.5 Flash / Pro |
| 이미지 AI | GPT Image 1 Mini/1/1.5, Nano Banana/Pro |
| 텍스트 오버레이 | Pillow |
| 이미지 호스팅 | Cloudinary |
| 발행 | Instagram Graph API |
| 데이터 저장 | SQLite + 파일시스템 |
| 배포 | PyInstaller + Inno Setup |
| 동영상 (Phase 3) | Kling, Sora 등 |

---

## 8. 로컬 저장소 구조

```
/app_data/
├── /characters/
│   ├── /char_001/
│   │   ├── meta.json, sheet.png, front.png, 3q.png
│   │   └── expr_neutral.png, expr_happy.png, ...
│   └── /char_002/...
├── /projects/
│   └── /proj_20260207_001/
│       ├── project.json, /scenes/, /published/
└── /db/
    └── app.sqlite
```

---

## 9. 문서 구조

```
/project-docs/
├── PRD_MASTER.md              ← 전체 기획 마스터
├── DECISION_LOG.md            ← 의사결정 히스토리
├── WORKFLOW.md                ← 워크플로우 상세
├── UI_SPEC.md                 ← UI/UX 상세 스펙
├── IMAGE_GENERATION.md        ← 이미지 생성 로직 + 모델별 프롬프트
├── CHARACTER_CONSISTENCY.md   ← 캐릭터 일관성 시스템
├── TEXT_OVERLAY.md            ← Pillow 텍스트 처리
├── INSTAGRAM_API.md           ← 인스타 발행 로직
└── AI_IMAGE_MODEL_COMPARISON.md ← AI 이미지 모델 비교표
```

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-02-06 | 1.0.0 | 초기 PRD 작성 |
| 2026-02-06 | 1.1.0 | 캡션 자동생성, 캡션 검토 UI, 단계 간 이동, Gemini Flash |
| 2026-02-07 | 1.2.0 | 캐릭터 일관성 시스템, 이미지 모델 비교 |
| 2026-02-09 | 1.3.0 | 이미지 모델 확정 (GPT Image 3종 + Nano Banana 2종), DALL-E 3 등 제외, 비용 시뮬레이션, 로컬 저장소 구조 |
