# 의사결정 히스토리 (Decision Log)

> 이 문서는 프로젝트 진행 중 내린 주요 결정들과 그 배경을 기록합니다.
> 나중에 "왜 이렇게 했지?" 할 때 참고용입니다.

---

## 2026-02-06

### DEC-001: 아키텍처 - Python FastAPI 단독

**결정**: Python FastAPI 단독 (n8n 미사용)

**검토한 대안들**:
1. n8n 단독
2. n8n + Python 하이브리드
3. Python 단독 (선택)

**Python 단독을 선택한 이유**:
- 로컬 웹앱 형태에서 n8n 별도 설치/실행 → 사용자 부담 증가
- Python으로 모든 기능 구현 가능
- 단일 프로세스로 관리 간편
- 설치 파일 크기 최소화
- Pillow 한글 텍스트 오버레이는 Python 필수

**n8n을 포기한 이유**:
- 조건 분기가 많아지면 노드 수 기하급수적 증가
- 사용자가 n8n 별도 설치해야 함 (복잡)
- 로컬 웹앱과 n8n 연동이 불필요하게 복잡

---

### DEC-002: 배포 형태 - 로컬 웹앱 (.exe)

**결정**: Windows 로컬 웹앱 (Python 서버 + 브라우저 UI)

**검토한 대안들**:
1. Electron 데스크톱 앱
2. 순수 웹 SaaS
3. 로컬 웹앱 (선택)

**로컬 웹앱을 선택한 이유**:
- Electron 학습 곡선 회피 (시간 절약)
- UI 개발이 표준 웹 기술로 가능
- 씬 편집 UI, 이미지 프리뷰 등이 웹에서 더 자연스러움
- 추후 SaaS 전환 시 프론트엔드 코드 재사용 가능
- 설치 파일 크기 작음 (~50MB vs Electron 100-200MB)

**SaaS를 선택하지 않은 이유**:
- 초기 단계에서 서버 비용 부담
- 사용자별 API 키 관리 복잡
- 일회성 판매 모델과 맞지 않음

---

### DEC-003: 수익 모델 - 일회성 판매

**결정**: 프로그램 일회성 판매 (구독 모델 X)

**이유**:
- AI 비용은 사용자가 직접 부담 (본인 API 키 사용)
- 지속적인 운영 비용 없음
- 판매 후 유지보수 최소화
- 사용자 입장에서도 매월 결제 부담 없음

**AI 비용 사용자 부담 결정 이유**:
- 운영자가 API 비용 떠안으면 가격이 높아져야 함
- 사용자마다 사용량이 달라서 정액제 책정 어려움
- 사용자가 직접 무료 티어 활용 가능 (Gemini 등)

---

### DEC-004: 씬 검토 체크포인트 2단계

**결정**: 이미지 생성 전/후 2번의 검토 단계

**배경**:
- 사용자 피드백: "이미지 생성 후 마음에 안 들면 다시 만들어야 하는데, 그 전에 내용을 확인하고 싶다"

**워크플로우**:
```
[씬 내용 생성] → [1차 검토: 내용/대사] → [이미지 생성] → [2차 검토: 이미지] → [발행]
```

**1차 검토 (씬 내용)**:
- 대사/스토리 수정
- 씬 추가/삭제/순서 변경
- 콘텐츠 밀도 경고 확인
- 이미지 생성 비용 절약 효과

**2차 검토 (이미지)**:
- 마음에 안 드는 이미지만 재생성
- 전체 재생성 낭비 방지

---

### DEC-005: 분야 자동 감지 + 사용자 확인

**결정**: AI가 분야 자동 판단 → 사용자가 확인/수정

**검토한 대안들**:
1. 사용자가 매번 분야 선택
2. AI가 자동 판단 (확인 없이)
3. AI 자동 판단 + 사용자 확인 (선택)

**선택 이유**:
- 매번 선택하는 건 귀찮음
- AI 판단만 믿기엔 리스크 있음 (세무 vs 일반 판단 중요)
- 전문 분야(세무/법률 등)는 최신 법령 검증이 필요하므로 분야 구분 중요

**분야별 처리 차이**:
- 전문 분야 (세무/법률/노무/회계/부동산정책): 웹 검색 + 법령 DB 검증
- 일반 분야: 일반 웹 검색

---

### DEC-006: 썸네일 별도 생성

**결정**: 캐러셀 첫 장과 별도로 썸네일 이미지 생성

**검토한 대안**:
1. 첫 장을 썸네일로 사용
2. 별도 썸네일 생성 (선택)

**별도 생성 선택 이유**:
- 인스타 피드에서 클릭 유도가 중요
- 첫 장은 스토리 시작이라 썸네일로 적합하지 않음
- 전용 커버 이미지 (제목 + 훅 문구 + 마스코트)가 더 효과적

---

### DEC-007: 마스코트 캐릭터 (카드뉴스/심플용)

**결정**: 카드뉴스/심플 스타일에 작은 마스코트 캐릭터 옵션 추가

**배경**:
- 카드뉴스/심플 스타일은 캐릭터 없이 정보만 전달
- 너무 딱딱해 보일 수 있음
- 코너에 작은 마스코트로 브랜딩 + 친근함 효과

**설정**:
- ON/OFF 가능
- 기본값: ON

---

### DEC-008: 콘텐츠 밀도 제한 규칙

**결정**: 씬별 글자수/말풍선 개수 제한 + 경고

**제한 규칙**:
- 캐릭터 대사: 최대 20자
- 말풍선 개수: 최대 2개/씬
- 나레이션: 최대 30자

**이유**:
- 모바일에서 가독성 확보
- AI 이미지에 텍스트 오버레이 시 과밀 방지
- 초과 시 자동 분할 제안으로 사용자 편의

---

### DEC-009: 캡틴AI 블로그 참고 기능 반영

**참고 자료**: 캡틴AI 네이버 블로그 - Google AI Studio Build 4컷 만화 프로그램

**반영한 기능들**:

| 기능 | 우리 프로젝트 반영 방식 |
|------|------------------------|
| 그림 스타일 선택 | 웹툰/카드뉴스/심플 + 세부 스타일 |
| 저장 포맷 옵션 | 2x2, 가로연속, 세로연속, 개별파일 |
| 대사 배치 선택 | 말풍선 vs 하단 자막 |
| 캐릭터 프로필 카드 | 캐릭터 프리셋 저장/불러오기 |
| 단계별 이동 | 씬 검토 UI에서 이전/다음 |

**추가로 확장한 부분**:
- 이미지 비율 설정 (인스타 정책 변경 대비)
- 캐릭터 표정 지정
- 해시태그 자동 생성
- 예약 발행

---

### DEC-010: 이미지 비율 설정 옵션

**결정**: 기본 1080x1350px, 사용자가 변경 가능

**배경**:
- 현재 인스타 캐러셀 최적 비율: 1080x1350px (4:5)
- 인스타 정책이 바뀔 수 있음
- 다른 플랫폼 확장 시에도 필요

**지원 비율**:
- 1:1 (1080x1080)
- 4:5 (1080x1350) - 기본값
- 9:16 (1080x1920)
- 커스텀

---

### DEC-011: 상세 설정 - 디폴트값 + 필요시 수정

**결정**: 모든 설정에 합리적인 디폴트값 제공, 필요시 수정 가능

**이유**:
- 처음 사용자는 설정 없이 바로 시작 가능
- 고급 사용자는 세부 조정 가능
- "일단 돌아가게" 하는 게 중요

**디폴트값이 있는 설정들**:
- 텍스트: 폰트(나눔고딕), 크기(24px/20px)
- 캐릭터: 질문자(일반인), 전문가(자동), 표정(자동)
- 레이아웃: 비율(1080x1350), 여백(20px)
- 스타일: 웹툰, 마스코트(ON)
- 출력: 개별파일, PNG, 고화질(90%)
- 발행: 해시태그(자동), 예약(즉시)
- AI: DALL-E 3

---

### DEC-012: 캡션 자동 생성 구조

**결정**: 캡션을 4개 파트로 구조화 (훅 + 본문 + 전문가팁 + 해시태그)

**구조**:
```
🔥 훅 문장 (클릭 유도)
↓
📝 본문 캡션 (스토리 요약 + CTA)
↓
💡 전문가 Tip (핵심 정보 1줄)
↓
#️⃣ 해시태그 (15~20개)
```

**이유**:
- 인스타 피드에서 훅이 먼저 보여야 클릭 유도
- 전문가 팁으로 신뢰도 + 실용성 강조
- 해시태그 15~20개로 검색 노출 최적화

---

### DEC-013: 단계 간 이동 (이전/다음)

**결정**: 모든 단계에서 이전 단계로 돌아가기 가능

**이유**:
- 캡틴AI 블로그에서 본 기능
- 이미지 생성 후 스토리 수정 필요할 수 있음
- 유연한 수정이 완성도 높은 결과물로 이어짐

**주의사항**:
- 이전 단계로 돌아가서 수정 시, 해당 단계 이후 결과물은 재생성 필요
- 사용자에게 "이후 단계 결과물이 초기화됩니다" 경고 표시

---

### DEC-014: 텍스트 생성 모델 - Gemini Flash 기본

**결정**: Gemini 2.5 Flash를 기본 모델로 사용

**검토한 대안**:
1. Gemini Pro
2. Claude
3. GPT-4
4. Gemini Flash (선택)

**Flash 선택 이유**:
- Pro보다 저렴 (간단한 스토리에는 Flash로 충분)
- 속도 빠름
- 무료 티어 넉넉
- 캡틴AI에서도 Flash 사용 (검증된 선택)

**Pro 사용 케이스**:
- 복잡한 전문 내용 (법률 해석 등)
- Flash로 품질 부족 시 설정에서 변경 가능

---

### DEC-015: 동영상 변환 (Phase 3)

**결정**: 이미지→동영상 변환 기능은 Phase 3에서 구현

**검토한 서비스**:
- Sora (OpenAI): 품질 좋지만 비용 높음
- Grok (xAI): 상대적으로 저렴
- Runway: 안정적

**Phase 3으로 미룬 이유**:
- 핵심 기능 먼저 완성
- 동영상 API 비용/안정성 확인 필요
- 릴스/쇼츠 수요 확인 후 구현

---

## 향후 결정 필요 사항

| 항목 | 상태 | 예상 결정 시점 |
|------|------|---------------|
| 가격 책정 | 미정 | 프로그램 완성 후 |
| 자동 업데이트 방식 | 미정 | 사용자 수 증가 시 |
| 다른 플랫폼 지원 | 미정 | Phase 3 |
| 동영상 변환 서비스 선택 | 미정 | Phase 3 |

---

## 변경 이력

| 날짜 | 결정 번호 | 내용 |
|------|----------|------|
| 2026-02-06 | DEC-001~011 | 초기 의사결정 기록 |
| 2026-02-06 | DEC-012~015 | 캡션 구조, 단계 이동, Gemini Flash, 동영상 변환 추가 |
